<p-menubar [model]="navItems()">
  <!-- Navigation Lists -->
  <ng-template #item let-navItem let-root="root">
    <a
      [routerLink]="navItem.routerLink"
      routerLinkActive="bg-gray-200"
      class="flex items-center px-4 py-3 cursor-pointer gap-2"
    >
      <span>{{ navItem.label }}</span>
      <i [class]="['pi', root ? 'pi-angle-down' : '']"></i>
    </a>
  </ng-template>
  <ng-template #end>
    <div class="cursor-pointer flex gap-2 items-center">
      <!-- Theme Switcher -->
      <p-toggleswitch [(ngModel)]="darkMode" (ngModelChange)="toggleDarkMode()">
        <ng-template #handle let-darkmode="darkMode">
          <i [ngClass]="['text-xs!', 'pi', darkMode ? 'pi-moon' : 'pi-sun']"></i>
        </ng-template>
      </p-toggleswitch>
      <!-- Avatar -->
      <!-- eslint-disable-next-line @angular-eslint/template/click-events-have-key-events, @angular-eslint/template/interactive-supports-focus -->
      <div (click)="op.toggle($event)" class="flex items-center gap-2 mx-2">
        @if (authStore.avatar() | async; as avatarUrl) {
          <p-avatar [image]="avatarUrl" size="large" shape="circle"></p-avatar>
        } @else {
          <p-avatar [label]="authStore.displayName()[0]" size="large" shape="circle"></p-avatar>
        }
        <span class="text-color hidden md:inline">{{ authStore.displayName() }}</span>
      </div>
    </div>
    <!-- User Popover -->
    <p-popover #op>
      <div class="flex flex-col gap-3 mx-2">
        <a
          class="flex items-center gap-4"
          [routerLink]="['/people', authStore.uid()]"
          (click)="op.toggle($event)"
        >
          <i class="pi pi-user"></i>
          Profile
        </a>
        <a class="flex items-center gap-4" routerLink="/settings" (click)="op.toggle($event)">
          <i class="pi pi-cog"></i>
          Settings
        </a>
        <p-divider />
        <!-- eslint-disable-next-line @angular-eslint/template/elements-content -->
        <button pButton label="Logout" icon="pi pi-sign-out" (click)="logout()"></button>
      </div>
    </p-popover>
  </ng-template>
</p-menubar>
<!-- Main routing content slot -->
<p-card class="my-2 mx-2 md:mx-6 bg-emphasis h-[90vh] overflow-auto">
  <router-outlet />
</p-card>
