<p-menubar [model]="navItems()">
  <ng-template #item let-navItem let-root="root">
    <a
      [routerLink]="navItem.routerLink"
      routerLinkActive="bg-gray-200"
      class="flex items-center px-4 py-3 cursor-pointer gap-2"
    >
      <span>{{ navItem.label }}</span>
      <i [class]="['pi', root ? 'pi-angle-down' : '']"></i>
    </a>
  </ng-template>
  <ng-template #end>
    <div class="cursor-pointer flex gap-2 items-center">
      <!-- Theme Switcher -->
      <p-toggleswitch [(ngModel)]="darkMode" (ngModelChange)="toggleDarkMode()">
        <ng-template #handle let-darkmode="darkMode">
          <i [ngClass]="['text-xs!', 'pi', darkMode ? 'pi-moon' : 'pi-sun']"></i>
        </ng-template>
      </p-toggleswitch>
      <!-- Avatar -->
      <div (click)="op.toggle($event)" class="flex items-center gap-2 mx-2">
        <p-avatar [label]="authStore.displayName()[0]" size="large" shape="circle"></p-avatar>
        <span class="text-color hidden md:inline">{{ authStore.displayName() }}</span>
      </div>
    </div>
    <p-popover #op>
      <div class="flex flex-col gap-3 mx-2">
        <a
          class="flex items-center gap-4"
          [routerLink]="['/people', authStore.uid()]"
          (click)="op.toggle($event)"
        >
          <i class="pi pi-user"></i>
          Profile
        </a>
        <a class="flex items-center gap-4" routerLink="/settings" (click)="op.toggle($event)">
          <i class="pi pi-cog"></i>
          Settings
        </a>
        <p-divider />
        <button pButton label="Logout" icon="pi pi-sign-out" (click)="logout()"></button>
      </div>
    </p-popover>
  </ng-template>
</p-menubar>
<p-card class="m-6 bg-emphasis"><router-outlet /></p-card>
